<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Get Current URL in JavaScript</title>
</head>
<body>
    <script>



    function redirect() {

        // console.log(window.location)
        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
        });

        // console.log(params.code);
        // Get the value of "some_key" in eg "https://example.com/?some_key=some_value"
        const code = params.code;
        
        window.location = code ? `miks-oauth://plex/${code}` : `https://www.google.com`
    }
    window.onload = (event) => {
        redirect();
    };
    </script>
     If not already redirected. 
    <button type="button" onclick="redirect();">Click Here to Continue</button>
</body>
</html>
